
{% extends "base.html" %}

{% block title %}{{ company|title }} Field Mapping{% endblock %}

{% block content %}
<div class="card">
    <div class="card-body">
        <h2>{{ company|title }} Field Mapping</h2>
        <div class="alert alert-info">
            Configure how fields from Abacus map to Pipedrive fields.
        </div>
        <form id="fieldMappingForm">
            <div id="fieldMappings"></div>
            <button type="submit" class="btn btn-primary mt-3">Save Mapping</button>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', async () => {
    try {
        const response = await fetch('/pipedrive-fields?company={{ company }}');
        const fields = await response.json();
        displayFieldMappings(fields);
    } catch (error) {
        console.error('Error loading field mappings:', error);
    }
});

function displayFieldMappings(fields) {
    const container = document.getElementById('fieldMappings');
    // Add field mapping UI here
}
</script>
{% endblock %}
